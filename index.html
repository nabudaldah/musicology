
<html>

  <head>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
      body {
        font-family: 'Raleway', sans-serif;
        margin: 0;
        padding: 6em;
        background: DimGray;
        color: whitesmoke;
        font-size: 20pt;
        line-height: 1.3em;
      }

      h1 {
        font-weight: normal;
        font-size: 4em;
        padding-bottom: 0.5em;
      }

      h2 {
        font-weight: normal;
        font-size: 2em;
        font-weight: bold;
        padding-bottom: 0.5em;
        padding-top: 2em;
      }

      figure {
        margin: 2em;
      }

      figcaption {
        font-size: smaller;
        text-align: center;
        margin: 1em;
      }

      a {
        color: inherit;
      }

    </style>

  </head>


  <body>
    <h1>Musicology</h1>

    <p><strong>Nabi Abudaldah, 2021</strong></p>

    <p>
      This is music theory in a nutshell. A <em>cheat-sheet</em> if you will. To get you from zero to playing amazing melodies quickly and providing you with some pointers if you would like to deep-dive into the <em>why</em> of musicology. Let's start with sounds.
    </p>

    <h2>Sound</h2>
    
    <p>
      In nature, anything that vibrates can be observed by us. Most notably are strings. When a string of any material is tensioned, it vibrates in a very orderly way. The way it moves generates a vibration that we call a <em>sine</em> wave. Most sounds in nature are not a perfect sine wave, but if they are, it sounds nice to us.
    </p>

    <figure>
      <div id="figure1" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 1: a sine wave visualized</figcaption>
    </figure>

    <h2>Pitch</h2>

    A perfect sine wave has a certain pitch. That is the frequency or the speed of it's vibration per second expressed in Hertz and abbreviated as Hz.

    <figure>
      <div id="figure2" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 2: the pitch of 440Hz is culturally called "A" or "A4"</figcaption>
    </figure>

    Both the frequency as the labelling of pitches is cultural and has changed over time and place. The human hearing system can typically observe vibration between 20Hz and 20,000Hz. Human voice typically ranges between 85Hz and 255Hz.

    <h2>Octaves</h2>

    Some pitches sound pleasant to us humans. One of the pitches that go well together are pitches that are exact multiples of each other. Any pitch that is doubled in frequency sounds well with it's base frequency. This relationship is called an <em>octave</em> and is universal across cultures. As this is a 1 to 2 ratio, we can notate it as 1:2.

    <figure>
      <div id="figure3" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 3: doubling the pitch of A results in a higher octave of A</figcaption>
    </figure>

    This is a special relationship as it is the exact doubling of a pitch. However, this simple ratio of 1 to 2 is only one of the many ratio's that sound great!

    <h2>Harmonics</h2>

    The doubling of a pitch is called a <em>harmonic</em>, but the tripling of a pitch is also called a harmonic! These multiples of the same pitch sound pleasing together and they are called the <em>harmonic series</em>.

    <figure>
      <div id="figure4" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 4: Harmonic series visualized as sine waves and their relationship</figcaption>
    </figure>

    These multiples of the pitch, or simple mathematical ratio's of the pitch, sounds great together and are the fundamentals of notes, scales and chords that we use to make music that sounds great to us!

    <p>
      Resources: <a href="https://www.youtube.com/watch?v=Wx_kugSemfY">Andre Huang, Harmonics</a>, <a href="https://learningmusic.ableton.com/notes-and-scales/notes-and-scales.html">Ableton Learn</a>
    </p>

    <h2>Chromatic Scale</h2>

    Historically in Western music, 12 pitches have been used to make music. These 12 pitches are together called the <em>chromatic scale</em>. While 12 discrete pitches are arbitrary, there is some foundation as to how it got to 12 given the harmonic series that sound great together: there are a few well spread out pitches that have simple ratio's between them.

    <figure>
      <div id="figure5" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 5: the 7 pitches from a base note C4 that have simple ratio´s</figcaption>
    </figure>

    But as you see, there are some big gaps! Especially between A and B there is nothing. To make these pitch jumps a little smaller, in-between notes where invented with less simple ratio's.

    <figure>
      <div id="figure6" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 6: the 12 pitches with less simple ratio's but equally spaced that make up most popular music</figcaption>
    </figure>

    <p>Doesn't this look odly familiar? Yes it does! It's the piano keys. The white and black keys. In practice however, tuning instruments isn't done using these simple ratio's, but rather the twelve-equaly-tempered tuning system. Mostly stick to the equally tempered tuning in order to match all musical instruments and tune them in the same manner.</p>

    <figure>
      <div id="figure7" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 7: the piano key layout with white (natural) and black keys (accidentals)</figcaption>
    </figure>

    <p>
      The piano in C has become the "QWERTY" layout of music input devices. But beware, you do not need to use a classical piano keys layout to make music! Below are some alternatives that are more straight forward.
    </p>

    <p>
      Resources: <a href="https://www.youtube.com/watch?v=CFbG-8eYKJU">Casey Connor, 12-Tone Scales</a>, <a href="https://www.youtube.com/watch?v=IT9CPoe5LnM">Steven Jacks, Twelve Notes in Music</a>
    </p>

    <h2>Modes</h2>

    <p>Some notes are more harmoneous or consonant together while others sound more dissonant. Modes are a great way to reduce the number of notes and give a certain feel to your music! Let's reconsider the pentatonic scale or the 7 natural notes that have simple relationships. Let's leave out the name of notes and simply look at the ratio's:
    </p>

    <figure>
      <div id="figure8" style="width: 1000px; height: 400px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 8: the 7 pitches with simple ratio´s</figcaption>
    </figure>

    <p>As you can see, there are jumps over the accidental ratio´s. Going from <em>unison</em> to <em>major third</em> we skip one note in between, this is a "whole step" jump. Going from <em>major third</em> to <em>fourth</em> we don't need to skip a note of the chromatic scale, this is a "half step" jump. Let's remove the more complicated ratio's from the 12 notes in the chromatic scale to be left with only the 7-tones of the natural scale:</p>

    <figure>
      <div id="figure9" style="width: 1000px; height: 200px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 9: the 7 simple ratio's of the natural scale starts at <em>unison</em></figcaption>
    </figure>

    <p>Modes are transpositions of the order or sequence of jumps that are in the 7 natural tones. Let´s see how this works when transposing (or "shifting" or "sliding") the original sequence of simple pitch ratio's:</p>

    <figure>
      <div id="figure10" style="width: 1000px; height: 1200px; margin-left: auto; margin-right: auto;"></div>
      <figcaption>Figure 10: Modes are transpositions of the distances between the 7-natural tones</figcaption>
    </figure>

    <p>
      Resources: <a href="https://en.wikipedia.org/wiki/Mode_(music)">Wikipedia Mode</a>
    </p>

    <h2>Transposing</h2>

    Using music theory of harmonics and modes, we can pick any root note and generate a scale to our liking. This tool allows you to pick a mode, pick a root note and add or remove notes inside or outside of this scale to generate your own custom scale! This tool also shows you how to play this on a piano.

    <h2>Playing</h2>

    Modern electronics can help greatly in exploring musical ideas. I highly recommend the use of input devices such as tablets and pad controllers (4x4 or 8x8) for generating musical ideas, as these can dynamically switch between modes.

    <p>Explain 4x4 and 8x8 MIDI controllers</p>

    <p>Explain iPad Garageband controller</p>

  </body>

  <script src="two.min.js"></script>

  <script>
  
    const notes = "cCdDefFgGaAb";

    // I Don't Particularily Like Modes At All = IDPLMAT

    // Wiki: https://en.wikipedia.org/wiki/Mode_(music)#Modern_modes

    const intervals = {
      "ionian": [2, 2, 1, 2, 2, 2, 1],
      "dorian": [2, 1, 2, 2, 2, 1, 2],
      "phrygian": [1, 2, 2, 2, 1, 2, 2],
      "lydian": [2, 2, 2, 1, 2, 2, 1],
      "mixolydian": [2, 2, 1, 2, 2, 1, 2],
      "aeolian": [2, 1, 2, 2, 1, 2, 2],
      "locrian": [1, 2, 2, 1, 2, 2, 2],
    };

    const modes = {
      "ionian": "cdefgab",
      "dorian": "defgabc",
      "phrygian": "efgabcd",
      "lydian": "fgabcde",
      "mixolydian": "gabcdef",
      "aeolian": "abcdefg",
      "locrian": "bcdefga",
    };

    const a4 = 440;

    const octaves = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];



    function make_scale(mode, root_note) {
      if (!(mode in modes)) return null;
      var i = notes.indexOf(root_note);
      if (i < 0) return null;
      var scale = ''
      scale += notes[i % 12]
      for (var d of intervals[mode]) {
        i = i + d
        scale += notes[i % 12]
      }

      return scale;
    }



  </script>

  <script  type="text/javascript">
    const width = 1000, height = 400;
  </script>

  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure1');
    var two = new Two(params).appendTo(elem);

    //var line = two.makeLine(0,200,width,200)
    //line.stroke = 'white';
    //line.linewidth = 2;

    var revolutions = 1;

    var points = []
    for(var r = 0, x = 0, y = 0; r < (Math.PI * 2 * revolutions); r += (Math.PI * 2 / 360)){

      x += (width / 360 / revolutions);
      y = 200 + Math.sin(r) * 180
      points.push(new Two.Anchor(x, y))
    }

    var path = new Two.Path(points, false, false);
    path.linewidth = 2;
    path.stroke = 'white';
    path.noFill();


    two.add(path)

    // Don’t forget to tell two to draw everything to the screen
    two.update();
  </script>


  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure2');
    var two = new Two(params).appendTo(elem);

    var line = two.makeLine(0,200,width,200)
    line.stroke = 'white';
    line.linewidth = 2;

    var circle = two.makeCircle(width/2, 200, 10)
    circle.noStroke();

    var text = two.makeText('A', width/2, 200 - 40, { fill: 'white', size: '24pt' })
    var text = two.makeText('440Hz', width/2, 200 + 40, { fill: 'white', size: '16pt' })

    // Don’t forget to tell two to draw everything to the screen
    two.update();
  </script>

  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure3');
    var two = new Two(params).appendTo(elem);

    var line = two.makeLine(0,200,width,200)
    line.stroke = 'white';
    line.linewidth = 2;

    var circle = two.makeCircle((width / 4 * 1), 200, 10)
    circle.noStroke();

    var circle = two.makeCircle((width / 4 * 3), 200, 10)
    circle.noStroke();

    var text = two.makeText('A4', (width / 4 * 1), 200 - 40, { fill: 'white', size: '24pt' })
    var text = two.makeText('440Hz', (width / 4 * 1), 200 + 40, { fill: 'white', size: '16pt' })

    var text = two.makeText('A5', (width / 4 * 3), 200 - 40, { fill: 'white', size: '24pt' })
    var text = two.makeText('880Hz', (width / 4 * 3), 200 + 40, { fill: 'white', size: '16pt' })

    var text = two.makeText('1:2', (width / 4 * 2), 200 - 80, { fill: 'white', size: '32pt' })

    var arrow = two.makeArrow((width / 4 * 1) + 40, 200 - 40, (width / 4 * 3) - 40, 200 - 40)
    arrow.stroke = 'white'
    arrow.linewidth = 2;
    arrow.dashes = [1, 3];

    // Don’t forget to tell two to draw everything to the screen
    two.update();
  </script>

  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure4');
    var two = new Two(params).appendTo(elem);

    //var line = two.makeLine(0,200,width,200)
    //line.stroke = 'white';
    //line.linewidth = 2;

    var text = two.makeText('A4', 75, 100-10, { fill: 'white', size: '18pt' })
    var text = two.makeText('440Hz', 75, 100+10, { fill: 'white', size: '12pt' })
    var text = two.makeText('1:1', width-75, 100, { fill: 'white', size: '24pt' })

    var revolutions = 1;
    var points = []
    for(var r = 0, x = 150, y = 0; r < (Math.PI * 2 * revolutions); r += (Math.PI * 2 / 360)){

      x += ((width - 300) / 360 / revolutions);
      y = 100 + Math.sin(r) * 30
      points.push(new Two.Anchor(x, y))
    }
    var path = new Two.Path(points, false, false);
    path.linewidth = 2;
    path.stroke = 'white';
    path.noFill();
    two.add(path)


    var text = two.makeText('A5', 75, 200-10, { fill: 'white', size: '18pt' })
    var text = two.makeText('880Hz', 75, 200+10, { fill: 'white', size: '12pt' })
    var text = two.makeText('1:2', width-75, 200, { fill: 'white', size: '24pt' })

    var revolutions = 2;
    var points = []
    for(var r = 0, x = 150, y = 0; r < (Math.PI * 2 * revolutions); r += (Math.PI * 2 / 360)){

      x += ((width - 300) / 360 / revolutions);
      y = 200 + Math.sin(r) * 30
      points.push(new Two.Anchor(x, y))
    }
    var path = new Two.Path(points, false, false);
    path.linewidth = 2;
    path.stroke = 'white';
    path.noFill();
    two.add(path)


    var text = two.makeText('E6', 75, 300-10, { fill: 'white', size: '18pt' })
    var text = two.makeText('1320Hz', 75, 300+10, { fill: 'white', size: '12pt' })
    var text = two.makeText('1:3', width-75, 300, { fill: 'white', size: '24pt' })

    var revolutions = 3;
    var points = []
    for(var r = 0, x = 150, y = 0; r < (Math.PI * 2 * revolutions); r += (Math.PI * 2 / 360)){

      x += ((width - 300) / 360 / revolutions);
      y = 300 + Math.sin(r) * 30
      points.push(new Two.Anchor(x, y))
    }
    var path = new Two.Path(points, false, false);
    path.linewidth = 2;
    path.stroke = 'white';
    path.noFill();
    two.add(path)

    // Don’t forget to tell two to draw everything to the screen
    two.update();
  </script>


  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure5');
    var two = new Two(params).appendTo(elem);

    var line = two.makeLine(0,200,width,200)
    line.stroke = 'white';
    line.linewidth = 2;

    // https://pages.mtu.edu/~suits/scales.html
    // Just intonation of C4
    var diatonic = [
      ['unison',            1   ,  1,   'C4'  ],
      ['major second',      9   ,  8,   'D4'  ],
      ['major third',       5   ,  4,   'E4'  ],
      ['fourth',            4   ,  3,   'F4'  ],
      ['fifth',             3   ,  2,   'G'   ],
      ['major sixth',       5   ,  3,   'A'   ],
      ['major seventh',     15  ,  8,   'B'   ],
      ['octave',            2   ,  1,   'C5'  ],
    ]

    for(var note of diatonic){

      var [harmonic, numerator, denominator, name] = note;



      var m = 40
      var x = m + (width - 2 * m) * ((numerator / denominator) - 1.0);



      var circle = two.makeCircle(x, 200, 10)
      circle.noStroke();
      if(name == 'C4' || name == 'C5') {
        circle.stroke = 'orange'
        circle.linewidth = 3;
      }

      //var text = two.makeText(`${numerator}/${denominator}`, x, 200 + 40, { fill: 'white', size: '12pt' })
      var text = two.makeText(name, x, 200 - 40, { fill: 'white', size: '12pt' })
      var text = two.makeText(numerator,   x, 200 + 40, { fill: 'white', size: '12pt' })
      var line = two.makeLine(x - 8, 200 + 50, x + 8, 200+50)
      line.stroke = 'white'
      var text = two.makeText(denominator, x, 200 + 65, { fill: 'white', size: '12pt' })

    }


    // Don’t forget to tell two to draw everything to the screen
    two.update();

  </script>

  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure6');
    var two = new Two(params).appendTo(elem);

    var line = two.makeLine(0,200,width,200)
    line.stroke = 'white';
    line.linewidth = 2;

    // https://en.wikipedia.org/wiki/Twelfth_root_of_two
    // Just intonation of C4
    var chromatic = [
      ['unison',            1   ,  1,   'C4'  ],
      ['minor second',      16  ,  15,  'C4#' ],
      ['major second',      9   ,  8,   'D4'  ],
      ['minor third',       6   ,  5,   'E4b' ],
      ['major third',       5   ,  4,   'E4'  ],
      ['fourth',            4   ,  3,   'F4'  ],
      ['diminished fifth',  7   ,  5,   'F4#' ],
      ['fifth',             3   ,  2,   'G'   ],
      ['minor sixth',       8   ,  5,   'A4b' ],
      ['major sixth',       5   ,  3,   'A'   ],
      ['minor seventh',     9   ,  5,   'B4b' ],
      ['major seventh',     15  ,  8,   'B'   ],
      ['octave',            2   ,  1,   'C5'  ],
    ]

    for(var note of chromatic){

      var [harmonic, numerator, denominator, name] = note;



      var m = 40
      var x = m + (width - 2 * m) * ((numerator / denominator) - 1.0);


      if(name.endsWith('#') || name.endsWith('b')) {
        var circle = two.makeCircle(x, 200, 10)
        circle.noStroke();
        circle.fill = 'black'
        var text = two.makeText(name, x, 200 - 40, { fill: 'black', size: '12pt' })
        var text = two.makeText(numerator,   x, 200 + 40, { fill: 'black', size: '12pt' })
        var line = two.makeLine(x - 8, 200 + 50, x + 8, 200+50)
        line.stroke = 'black'
        var text = two.makeText(denominator, x, 200 + 65, { fill: 'black', size: '12pt' })
      } else {
        var circle = two.makeCircle(x, 200, 10)
        circle.noStroke();
        circle.fill = 'white'
        if(name == 'C4' || name == 'C5') {
          circle.stroke = 'orange'
          circle.linewidth = 3;
        }
        var text = two.makeText(name, x, 200 - 40, { fill: 'white', size: '12pt' })
        var text = two.makeText(numerator,   x, 200 + 40, { fill: 'white', size: '12pt' })
        var line = two.makeLine(x - 8, 200 + 50, x + 8, 200+50)
        line.stroke = 'white'
        var text = two.makeText(denominator, x, 200 + 65, { fill: 'white', size: '12pt' })
      }

    }


    // Don’t forget to tell two to draw everything to the screen
    two.update();

  </script>

  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure7');
    var two = new Two(params).appendTo(elem);

    var chromatic = [
      ['unison',            1   ,  1,   'C4'  ],
      ['minor second',      16  ,  15,  'C4#' ],
      ['major second',      9   ,  8,   'D4'  ],
      ['minor third',       6   ,  5,   'E4b' ],
      ['major third',       5   ,  4,   'E4'  ],
      ['fourth',            4   ,  3,   'F4'  ],
      ['diminished fifth',  7   ,  5,   'F4#' ],
      ['fifth',             3   ,  2,   'G'   ],
      ['minor sixth',       8   ,  5,   'A4b' ],
      ['major sixth',       5   ,  3,   'A'   ],
      ['minor seventh',     9   ,  5,   'B4b' ],
      ['major seventh',     15  ,  8,   'B'   ],
      // ['octave',            2   ,  1,   'C5'  ],
    ]

    const pixel_scale  =   2;
    const white_width  =  24 * pixel_scale;
    const white_height = 150 * pixel_scale;
    const black_width  =  12 * pixel_scale;
    const black_height =  96 * pixel_scale;

    var key = 0;
    for(const note of chromatic){
      const [harmonic, numerator, denominator, name] = note;

      if(name.endsWith('#') || name.endsWith('b')) {
      } else {
        var x = (width / 2) - ((white_width * 7) / 2) + (key * white_width);
        var y = (height / 2);
        var rect = two.makeRectangle(x, y, white_width, white_height);
        rect.fill = 'white';
        //rect.noStroke();
        var text = two.makeText(name, x, y + (white_height / 2) + 20, { fill: 'white', size: '12pt' })
        key += 1;
      }

    }
    

    var key = 0;
    for(const note of chromatic){
      const [harmonic, numerator, denominator, name] = note;

      if(name.endsWith('#') || name.endsWith('b')) {
        var x = (width / 2) - ((white_width * 7) / 2) + (key * white_width) - (white_width / 2);
        var y = (height / 2) - (white_height / 2) + ((white_height / 5 * 3) / 2);
        var rect2 = two.makeRectangle(x, y, (white_width / 5 * 3), (white_height / 5 * 3));
        rect2.fill = 'black';

        var text = two.makeText(name, x, y - (black_height / 2) - 10, { fill: 'white', size: '12pt' })

      } else {
        key += 1;
      }

    }
    

    // Don’t forget to tell two to draw everything to the screen
    two.update();
  </script>

  <script type="text/javascript">
    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: height
    };
    var elem = document.getElementById('figure8');
    var two = new Two(params).appendTo(elem);

    var line = two.makeLine(0,200,width,200)
    line.stroke = 'white';
    line.linewidth = 2;

    // https://en.wikipedia.org/wiki/Five-limit_tuning#Twelve_tone_scale
    // Just intonation of C4
    var chromatic = [
      ['unison',            1   ,  1,   'C4'  ],
      ['minor second',      16  ,  15,  'C4#' ],
      ['major second',      9   ,  8,   'D4'  ],
      ['minor third',       6   ,  5,   'E4b' ],
      ['major third',       5   ,  4,   'E4'  ],
      ['fourth',            4   ,  3,   'F4'  ],
      ['diminished fifth',  7   ,  5,   'F4#' ],
      ['fifth',             3   ,  2,   'G4'  ],
      ['minor sixth',       8   ,  5,   'A4b' ],
      ['major sixth',       5   ,  3,   'A4'  ],
      ['minor seventh',     9   ,  5,   'B4b' ],
      ['major seventh',     15  ,  8,   'B4'  ],
      ['octave',            2   ,  1,   'C5'  ],
    ]

    for(var note of chromatic){

      var [harmonic, numerator, denominator, name] = note;

      var m = 40
      var x = m + (width - 2 * m) * ((numerator / denominator) - 1.0);

      var circle = two.makeCircle(x, 200, 10)
      circle.noStroke();
      if(name == 'C4' || name == 'C5') {
        circle.stroke = 'orange'
        circle.linewidth = 3;
      }

      if(name.endsWith('#') || name.endsWith('b')) {
        circle.opacity = 0.2;
      } else {
        //var text = two.makeText(`${numerator}/${denominator}`, x, 200 + 40, { fill: 'white', size: '12pt' })
        var text = two.makeText(harmonic, x, 200 - 40, { fill: 'white', size: '12pt' })
        var text = two.makeText(numerator,   x, 200 + 40, { fill: 'white', size: '12pt' })
        var line = two.makeLine(x - 8, 200 + 50, x + 8, 200+50)
        line.stroke = 'white'
        var text = two.makeText(denominator, x, 200 + 65, { fill: 'white', size: '12pt' })        
      }
    }


    // Don’t forget to tell two to draw everything to the screen
    two.update();

  </script>



  <script type="text/javascript">

    _height = 200

    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: _height
    };
    var elem = document.getElementById('figure9');
    var two = new Two(params).appendTo(elem);

    var line = two.makeLine(0,_height / 2,width, _height / 2)
    line.stroke = 'white';
    line.linewidth = 2;

    // https://en.wikipedia.org/wiki/Five-limit_tuning#Twelve_tone_scale
    // Just intonation of C4
    var chromatic = [
      ['unison',            1   ,  1,   'C4'  ],
      ['major second',      9   ,  8,   'D4'  ],
      ['major third',       5   ,  4,   'E4'  ],
      ['fourth',            4   ,  3,   'F4'  ],
      ['fifth',             3   ,  2,   'G4'  ],
      ['major sixth',       5   ,  3,   'A4'  ],
      ['major seventh',     15  ,  8,   'B4'  ],
      //['octave',            2   ,  1,   'C5'  ],
    ]

    for(var note of chromatic){

      var [harmonic, numerator, denominator, name] = note;

      var m = 40
      var x = m + (width - 2 * m) * ((numerator / denominator) - 1.0);

      var circle = two.makeCircle(x, _height / 2, 10)
      circle.noStroke();
      if(name == 'C4' || name == 'C5') {
        circle.stroke = 'orange'
        circle.linewidth = 3;
      }

      if(name.endsWith('#') || name.endsWith('b')) {
        circle.opacity = 0.2;
      } else {
        //var text = two.makeText(`${numerator}/${denominator}`, x, _height / 2 + 40, { fill: 'white', size: '12pt' })
        var text = two.makeText(harmonic, x, _height / 2 - 40, { fill: 'white', size: '12pt' })
        var text = two.makeText(numerator,   x, _height / 2 + 40, { fill: 'white', size: '12pt' })
        var line = two.makeLine(x - 8, _height / 2 + 50, x + 8, _height / 2+50)
        line.stroke = 'white'
        var text = two.makeText(denominator, x, _height / 2 + 65, { fill: 'white', size: '12pt' })        
      }
    }


    // Don’t forget to tell two to draw everything to the screen
    two.update();

  </script>


  <script type="text/javascript">

    _height = 1400

    // Make an instance of two and place it on the page.
    var params = {
      fullscreen: false,
      width: width,
      height: _height
    };
    var elem = document.getElementById('figure10');
    var two = new Two(params).appendTo(elem);

    // https://en.wikipedia.org/wiki/Five-limit_tuning#Twelve_tone_scale
    // Just intonation of C4
    var chromatic = [
      ['unison',            1   ,  1,   'C4'  , 'Ionian / Major Scale'],
      ['major second',      9   ,  8,   'D4'  , 'Dorian'],
      ['major third',       5   ,  4,   'E4'  , 'Phrygian'],
      ['fourth',            4   ,  3,   'F4'  , 'Lydian'],
      ['fifth',             3   ,  2,   'G4'  , 'Mixolydian'],
      ['major sixth',       5   ,  3,   'A4'  , 'Aeolian / Minor Scale'],
      ['major seventh',     15  ,  8,   'B4'  , 'Locrian'],
      //['octave',            2   ,  1,   'C5'  ],
    ]









    const row_height = 160;

    var l = 1;
    for(var note_shifted of chromatic){
      
      var [_harmonic, _numerator, _denominator, _name, _mode] = note_shifted;

      var text2 = two.makeText(_mode, 0, (l * row_height) - row_height + 100, { fill: 'white', size: '18pt', alignment: 'left' })

      var line = two.makeLine(0, l * row_height,width,  l * row_height)
      line.stroke = 'white';
      line.linewidth = 2;

      var r_shift = (_numerator / _denominator) - 1.0;

      for(var note of chromatic){

        var [harmonic, numerator, denominator, name, mode] = note;

        var r_unshifted = (numerator / denominator) - 1.0;
        var r = (1 + (r_unshifted - r_shift)) % 1

        console.log(r)

        var m = 40
        var x = m + (width - 2 * m) * (r);

        var circle = two.makeCircle(x, l * row_height, 10)
        circle.noStroke();
        if(name == 'C4' || name == 'C5') {
          circle.stroke = 'orange'
          circle.linewidth = 3;
        }

        if(name.endsWith('#') || name.endsWith('b')) {
          circle.opacity = 0.2;
        } else {
          //var text = two.makeText(`${numerator}/${denominator}`, x, _height / 2 + 40, { fill: 'white', size: '12pt' })
          var text = two.makeText(harmonic, x, (l * row_height) - 25, { fill: 'white', size: '12pt' })
        }

      }
      l += 1;
    }

  

    // Don’t forget to tell two to draw everything to the screen
    two.update();

  </script>



</html>
